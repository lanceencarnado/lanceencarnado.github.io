<!DOCTYPE html>
<html>
<head>

<!-- <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> -->
<script src="https://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="https://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script>
<script src="scripts/jquery.ui.touch-punch.min.js"></script>


<style>
html,body {
	height: 98%;
}

.draggable {
	position:absolute;
}

.flex-container {
  display: flex;
  height: 100%;
  flex-wrap: wrap;
  align-content: stretch;
  flex-direction: column;
}

.flex-container > div {
  width: 99%;
  margin: 2px;
  text-align: center;
  font-family: 'Helvetica', 'Arial', sans-serif;
  font-size: 18px;
  line-height: 30px;
}

#playground {
	flex-grow: 9.75;
}
/* 
#instruction_div {
	flex-grow: .25
}
 */
#reset_div {
	flex-grow: .25;
}
#reset_img {
	cursor: pointer;
}
#reset_img:hover {
  opacity: 0.5;
}

</style>
</head>
<body>

<script>
var top_z = 100;
// var instruction_visible = true;
$(function() {
	$( ".draggable" ).draggable({
		containment: "parent", // limit the dragging to within the parent container (the playground div)
		scroll: false,
		start: function() {
			this.style.zIndex = ++top_z;
// 			if (instruction_visible) {
// 				$( "#instruction_div" ).text( " " );
// 				instruction_visible = false;
// 			}
		}
  	});
});

$(document).on("click",".draggable", function (event) {
	this.style.zIndex = ++top_z;
});
</script>

<!-- 
<script>
$( function() {
	$( "#dialog" ).dialog();
} );
</script>

<div id="dialog" title="How to play">
  <p>Drag the images around with your mouse (desktop) or finger (mobile).</p>
</div>
 -->


<div class='flex-container'> 
	<div class="content" id="playground">
		<img id="2_green_15" class="draggable" src="images/intuitiveassets/2_green_15.png">
		<img id="3_purple_5" class="draggable" src="images/intuitiveassets/3_purple_5.png">
		<img id="4_green_11" class="draggable" src="images/intuitiveassets/4_green_11.png">
		<img id="5_purple_10" class="draggable" src="images/intuitiveassets/5_purple_10.png">
		<img id="7_red_8" class="draggable" src="images/intuitiveassets/7_red_8.png">
		<img id="8_red_light2" class="draggable" src="images/intuitiveassets/8_red_light2.png">
		<img id="10_purple_9" class="draggable" src="images/intuitiveassets/10_purple_9.png">
		<img id="11_purple_cubes2" class="draggable" src="images/intuitiveassets/11_purple_cubes2.png">
		<img id="13_green_3" class="draggable" src="images/intuitiveassets/13_green_3.png">
		<img id="14_blue_give2" class="draggable" src="images/intuitiveassets/14_blue_give2.png">
		<img id="16_yellow_12" class="draggable" src="images/intuitiveassets/16_yellow_12.png">
		<img id="17_yellow_shop2" class="draggable" src="images/intuitiveassets/17_yellow_shop2.png">
		<img id="19_green_ask2" class="draggable" src="images/intuitiveassets/19_green_ask2.png">
		<img id="21_blue2_photos2" class="draggable" src="images/intuitiveassets/21_blue_photos2.png">
		<img id="23_red_2" class="draggable" src="images/intuitiveassets/23_red_2.png">
		<img id="24_purple_1" class="draggable" src="images/intuitiveassets/24_purple_1.png">
		<img id="25_yellow_6" class="draggable" src="images/intuitiveassets/25_yellow_6.png">
		<img id="26_yellow_4" class="draggable" src="images/intuitiveassets/26_yellow_4.png">
		<img id="27_blue_13" class="draggable" src="images/intuitiveassets/27_blue_13.png">
		<img id="28_blue_14" class="draggable" src="images/intuitiveassets/28_blue_14.png">
		<img id="29_red_16" class="draggable" src="images/intuitiveassets/29_red_16.png">
		<img id="32_green_phone2" class="draggable" src="images/intuitiveassets/32_green_phone2.png">
	</div>
<!-- 
	<div id="instruction_div">
		Drag the images around with your mouse (desktop) or finger (mobile).
	</div>
 -->
	<div id="reset_div">
		<img src="images/intuitiveassets/reset.png" id="reset_img" alt="Reset positions" onclick="resetPositions()" height="60px" >
	</div>
</div>


<script>

// TEMPORARY: click listener to get positions
$(document).on("click",".draggable", function (event) {
    console.log(this.id + "left: " + this.offsetLeft + ", top: " + this.offsetTop);
});

function resetPositions() {
    // reset zIndexes as well
    $( "#2_green_15" ).css("z-index", "2");
    $( "#3_purple_5" ).css("z-index", "3");
    $( "#4_green_11" ).css("z-index", "4");
    $( "#5_purple_10" ).css("z-index", "5");
    $( "#7_red_8" ).css("z-index", "7");
    $( "#8_red_light2" ).css("z-index", "8");
    $( "#10_purple_9" ).css("z-index", "10");
    $( "#11_purple_cubes2" ).css("z-index", "11");
    $( "#13_green_3" ).css("z-index", "13");
    $( "#14_blue_give2" ).css("z-index", "14");
    $( "#16_yellow_12" ).css("z-index", "16");
    $( "#17_yellow_shop2" ).css("z-index", "17");
    $( "#19_green_ask2" ).css("z-index", "19");
    $( "#21_blue2_photos2" ).css("z-index", "21");
    $( "#23_red_2" ).css("z-index", "23");
    $( "#24_purple_1" ).css("z-index", "24");
    $( "#25_yellow_6" ).css("z-index", "25");
    $( "#26_yellow_4" ).css("z-index", "26");
    $( "#27_blue_13" ).css("z-index", "27");
    $( "#28_blue_14" ).css("z-index", "28");
    $( "#29_red_16" ).css("z-index", "29");
    $( "#32_green_phone2" ).css("z-index", "32");
    
    // origins based on purple - it's top most (but not left most)
    // var originLeft = 100;
    
    // find the midpoint width of the div to place the structure in the middle
    var widthMidpoint = $( "#playground" ).width() / 2;
    var originLeft =  widthMidpoint - 217 + 30; // width of full obj is 434, div by 2 is 217
    
    var heightMidpoint = $( "#playground" ).height() / 2;
    var originTop = heightMidpoint - 181 - 30; // height of full obj is 362
    
    $( "#2_green_15" ).offset({ left: originLeft + 130, top: originTop + 188 });
    $( "#3_purple_5" ).offset({ left: originLeft + 312, top: originTop + 98 });
    $( "#4_green_11" ).offset({ left: originLeft + 205, top: originTop + 243 });
    $( "#5_purple_10" ).offset({ left: originLeft, top: originTop });
    $( "#7_red_8" ).offset({ left: originLeft + 130, top: originTop + 205 });
    $( "#8_red_light2" ).offset({ left: originLeft - 18, top: originTop + 161 });
    $( "#10_purple_9" ).offset({ left: originLeft + 59, top: originTop + 203 });
    $( "#11_purple_cubes2" ).offset({ left: originLeft + 176, top: originTop + 220 });
    $( "#13_green_3" ).offset({ left: originLeft + 278, top: originTop + 148 });
    $( "#14_blue_give2" ).offset({ left: originLeft + 256, top: originTop + 43 });
    $( "#16_yellow_12" ).offset({ left: originLeft + 251, top: originTop + 75 });
    $( "#17_yellow_shop2" ).offset({ left: originLeft + 60, top: originTop + 3 });
    $( "#19_green_ask2" ).offset({ left: originLeft + 6, top: originTop + 45 });
    $( "#21_blue2_photos2" ).offset({ left: originLeft + 22, top: originTop + 117 });
    $( "#23_red_2" ).offset({ left: originLeft + 75, top: originTop + 54 });
    $( "#24_purple_1" ).offset({ left: originLeft + 223, top: originTop + 32 });
    $( "#25_yellow_6" ).offset({ left: originLeft + 82, top: originTop + 209 });
    $( "#26_yellow_4" ).offset({ left: originLeft + 82, top: originTop + 127 });
    $( "#27_blue_13" ).offset({ left: originLeft + 288, top: originTop + 124 });
    $( "#28_blue_14" ).offset({ left: originLeft + 171, top: originTop + 225 });
    $( "#29_red_16" ).offset({ left: originLeft + 276, top: originTop + 207 });
    $( "#32_green_phone2" ).offset({ left: originLeft + 154 , top: originTop + 85 });
    
    
// 	$( "#instruction_div" ).text( "Drag the images around with your mouse (desktop) or finger (mobile)." );
// 	instruction_visible = true;
	
}


window.onload = function() {
	resetPositions();
};
</script>

</body>
</html>